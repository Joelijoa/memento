<div class="schedule-container">
  <div class="schedule-header">
    <h2>Mon Planning</h2>
    <button mat-raised-button color="primary" (click)="openAddScheduleDialog()">
      <mat-icon>add</mat-icon>
      Nouveau Planning
    </button>
  </div>

  <div class="schedule-content">
    <div class="calendar-layout">
      <div class="calendar-panel">
        <mat-calendar #calendar [(selected)]="selectedDate" (selectedChange)="onDateSelected($event)" [dateClass]="$any(dateClass)"></mat-calendar>
        <div class="calendar-actions">
          <button mat-stroked-button color="primary" (click)="openAddScheduleDialog()">
            Planifier le {{ selectedDate | date: 'EEEE d MMMM' }}
          </button>
        </div>
      </div>
      <div class="day-panel">
        <h3>Plannings du {{ selectedDate | date: 'EEEE d MMMM' }}</h3>
        <div class="day-schedules">
          <div *ngIf="getSchedulesForDate(selectedDate).length === 0" class="no-schedules">
            <mat-icon>event_busy</mat-icon>
            <p>Aucun planning pr√©vu pour {{ selectedDate | date: 'EEEE d MMMM' }}</p>
          </div>
          <mat-card *ngFor="let schedule of getSchedulesForDate(selectedDate)" 
                    class="schedule-card"
                    [ngClass]="{'work-schedule': schedule.isWorkSchedule, 'personal-schedule': !schedule.isWorkSchedule}">
            <mat-card-content>
              <div class="schedule-header-row">
                <div class="schedule-time">
                  {{ formatTime(schedule.startTime) }} - {{ formatTime(schedule.endTime) }}
                </div>
                <div class="schedule-actions-inline">
                  <button mat-icon-button (click)="editSchedule(schedule)" class="inline-action-btn">
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button mat-icon-button (click)="deleteSchedule(schedule)" color="warn" class="inline-action-btn">
                    <mat-icon>delete</mat-icon>
                  </button>
                </div>
              </div>
              <div class="schedule-title">{{ schedule.title }}</div>
              <div *ngIf="schedule.description" class="schedule-description">
                {{ schedule.description }}
              </div>
              <mat-chip *ngIf="schedule.isWorkSchedule" class="work-chip">Travail</mat-chip>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
</div>
